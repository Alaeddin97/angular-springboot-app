<div class="main-content page-m">
  <div class="section-content section-content-p30 e-spc">
    <div class="container-fluid">
      <form [formGroup]="checkoutFormGroup" (ngSubmit)="onSubmit()">
        <div class="form-area" formGroupName="customer">
          <h3>Customer</h3>
          <div class="row">
            <div class="col-md-6">
              <div class="input-space">
                <input
                  type="text"
                  placeholder="First Name"
                  formControlName="firstName"
                />
              </div>
            </div>
            <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched)">

              <div *ngIf="firstName.errors?.required || firstName.errors?.notOnlyWhiteSpace" class="alert alert-danger mt-1">
                  First Name is required
              </div>

              <div *ngIf="firstName.errors?.minlength " class="alert alert-danger mt-1">
                  First Name must be at least 2 characters long
              </div>
           </div>
            <div class="col-md-6">
              <div class="input-space">
                <input
                  type="text"
                  placeholder="Last Name"
                  formControlName="lastName"
                />
              </div>
            </div>
            <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)">

              <div *ngIf="lastName.errors?.required || firstName.errors?.notOnlyWhiteSpace" class="alert alert-danger mt-1">
                  Last Name is required
              </div>

              <div *ngIf="lastName.errors?.minlength" class="alert alert-danger mt-1">
                  Last Name must be at least 2 characters long
              </div>
           </div>
            <div class="clearfix"></div>
            <div class="col-md-6">
              <div class="input-space">
                <input
                  type="text"
                  placeholder="Email Address"
                  formControlName="email"
                />
              </div>
            </div>
            <div *ngIf="email.invalid && (email.dirty || email.touched)">

              <div *ngIf="email.errors?.required" class="alert alert-danger mt-1">
                  Email is required
              </div>

              <div *ngIf="email.errors?.pattern" class="alert alert-danger mt-1">
                  Email is not valid
              </div>
           </div>
          </div>
        </div>
        <!--Form 2-->
        <div class="form-area" formGroupName="address">
          <h3>Shipping Address</h3>
          <div class="row">
            <div class="col-md-12">
              <div class="input-space">
                <input
                  type="text"
                  placeholder="Street"
                  formControlName="street"
                />
              </div>
            </div>

            <div *ngIf="street.invalid && (street.dirty || street.touched)">

              <div *ngIf="street.errors?.required || street.errors?.notOnlyWhiteSpace" class="alert alert-danger mt-1">
                Street is required
              </div>

              <div *ngIf="street.errors?.minlength" class="alert alert-danger mt-1">
                Street must be at least 2 characters long
              </div>
           </div>

            <div class="col-md-12">
              <div class="input-space">
                <input
                type="text"
                placeholder="City"
                formControlName="city"
              />
              </div>
            </div>

            <div *ngIf="city.invalid && (city.dirty || city.touched)">

              <div *ngIf="city.errors?.required || city.errors?.notOnlyWhiteSpace" class="alert alert-danger mt-1">
                City is required
              </div>

              <div *ngIf="city.errors?.minlength" class="alert alert-danger mt-1">
                City must be at least 2 characters long
              </div>
           </div>

            <div class="col-md-12">
              <div class="input-space">
                <select formControlName="country" (change)="getStates()">
                  <option *ngFor="let country of countries"  [ngValue]="country">{{country.name}}</option>
                </select>
              </div>
            </div>

            <div *ngIf="country.invalid && (country.dirty || country.touched)">

              <div *ngIf="country.errors?.required || country.errors?.notOnlyWhiteSpace" class="alert alert-danger mt-1">
                Country is required
              </div>
           </div>

            <div class="col-md-12">
              <div class="input-space">
                <select formControlName="state">
                  <option *ngFor="let state of states" [ngValue]="state">{{state.name}}</option>
                </select>
              </div>
            </div>

            <div *ngIf="state.invalid && (state.dirty || state.touched)">

              <div *ngIf="state.errors?.required || state.errors?.notOnlyWhiteSpace" class="alert alert-danger mt-1">
                State is required
              </div>
           </div>

            <div class="col-md-12">
              <div class="input-space">
                <input
                  type="text"
                  placeholder="Zip Code / Postal Code"
                  formControlName="code"
                />
              </div>
            </div>

            <div *ngIf="code.invalid && (code.dirty || code.touched)">

              <div *ngIf="code.errors?.required || code.errors?.notOnlyWhiteSpace" class="alert alert-danger mt-1">
                Code is required
              </div>

              <div *ngIf="code.errors?.minlength" class="alert alert-danger mt-1">
                Code must be at least 2 characters long
              </div>
           </div>

          </div>
        </div>
<!-- 
        <div class="input-space">
          <label class="au-checkbox">
            <input type="checkbox" checked="checked" />
            <span class="au-checkmark"></span> Bill Address same as Shipping
            Adress
          </label>
        </div> -->

        <div class="form-area" formGroupName="creditCard">
          <h3>Credit Card</h3>
          <div class="row">
            <div class="col-md-12">
              <div class="input-space">
                <select formControlName="cardType">
                  <option>Visa</option>
                  <option></option>
                  <option></option>
                  <option></option>
                  <option></option>
                </select>
              </div>
            </div>

            <div *ngIf="cardType.invalid && (cardType.dirty || cardType.touched)">

              <div *ngIf="cardType.errors?.required" class="alert alert-danger mt-1">
                Card type is required
              </div>
           </div>


            <div class="col-md-12">
              <div class="input-space">
                <input
                  type="text"
                  placeholder="Name on card"
                  formControlName="nameOnCard"
                />
              </div>
            </div>

            <div *ngIf="nameOnCard.invalid && (nameOnCard.dirty || nameOnCard.touched)">

              <div *ngIf="nameOnCard.errors?.required" class="alert alert-danger mt-1">
                Name on card is required
              </div>
           </div>

            <div class="clearfix"></div>

            <div class="col-md-8">
              <div class="input-space">
                <input
                  type="text"
                  placeholder="Card number"
                  formControlName="cardNumber"
                />
              </div>
            </div>

            <div *ngIf="cardNumber.invalid && (cardNumber.dirty || cardNumber.touched)">

              <div *ngIf="cardNumber.errors?.required || cardNumber.errors?.notOnlyWhiteSpace" class="alert alert-danger mt-1">
                Card number is required
              </div>

              <div *ngIf="cardNumber.errors?.pattern" class="alert alert-danger mt-1">
              Card number must be 12 numbers long
              </div>
           </div>

            <div class="col-md-4">
              <div class="input-space">
                <input
                  type="text"
                  placeholder="CVV"
                  formControlName="cvvNumber"
                />
              </div>
            </div>


            <div *ngIf="cvvNumber.invalid && (cvvNumber.dirty || cvvNumber.touched)">

              <div *ngIf="cvvNumber.errors?.required || cvvNumber.errors?.notOnlyWhiteSpace" class="alert alert-danger mt-1">
                CVV number is required
              </div>

              <div *ngIf="cvvNumber.errors?.pattern" class="alert alert-danger mt-1">
              CVV number must be 3 numbers long
              </div>
           </div>


            <div class="clearfix"></div>

              <label class="date">Expiration Date</label>
              <div class="col-md-7">
                <div class="input-space">
                  <select formControlName="month">
                    <option *ngFor="let month of expirationMonths">{{month}}</option>
                  </select>
                </div>
              </div>

              <div *ngIf="month.invalid && (month.dirty || month.touched)">

                <div *ngIf="month.errors?.required" class="alert alert-danger mt-1">
                  Expiration month is required
                </div>
             </div>

              <div class="col-md-7">
                <div class="input-space">
                  <select formControlName="year" (change)="handleMonthYearSelection()">
                    <option *ngFor="let year of expirationYears">{{year}}</option>
                  </select>
                </div>
              </div>

              <div *ngIf="year.invalid && (year.dirty || year.touched)">

                <div *ngIf="year.errors?.required" class="alert alert-danger mt-1">
                  Expiration year is required
                </div>
             </div>

          </div>
        </div>

        <div class="form-area">
          <h3>Review Your Order</h3>
          <b>Total Quantity: {{totalQuantity}}</b>
          <h4>Shipping: FREE</h4>
          <B>Total Price: {{totalPrice | currency:'USD'}}</B>
        </div>
        <div class="text-center">
          <button class="btn btn-info" type="submit">Purchase</button>
        </div>
      </form>
    </div>
  </div>
</div>
